<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>‡πÄ‡∏Å‡∏° Insertion Sort ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏•‡∏≤‡∏™‡∏™‡∏¥‡∏Ñ + ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£ C++</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Kanit&display=swap');
  body {
    font-family: 'Kanit', sans-serif;
    background: linear-gradient(135deg, #fdf2f8 0%, #f0f9ff 30%, #f0fdf4 100%);
    margin: 0; padding: 20px;
    display: flex; justify-content: center; align-items: flex-start;
    min-height: 100vh;
  }
  .container {
    background: white;
    border-radius: 20px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.1);
    padding: 30px;
    max-width: 600px;
    width: 100%;
  }
  h2,h3 {
    text-align: center;
    color: #8b7ab8;
  }
  input, select, button {
    font-family: 'Kanit', sans-serif;
    font-size: 1rem;
    padding: 12px;
    border-radius: 15px;
    border: 2px solid #ddd;
    margin-bottom: 20px;
    width: 100%;
    box-sizing: border-box;
  }
  button {
    background: linear-gradient(135deg, #ddd6fe 0%, #bfdbfe 50%, #d1fae5 100%);
    cursor: pointer;
    color: #4b5563;
    font-weight: 600;
    transition: 0.3s;
  }
  button:hover {
    background: linear-gradient(135deg, #a78bfa 0%, #818cf8 50%, #6ee7b7 100%);
    color: #1f2937;
  }
  button:disabled {
    background: #f3f4f6;
    color: #9ca3af;
    cursor: not-allowed;
  }
  .number-box {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    margin: 20px 0;
  }
  .number {
    background: #f3f4f6;
    border-radius: 15px;
    padding: 20px 25px;
    font-weight: 700;
    font-size: 1.3rem;
    border: 2px solid #e5e7eb;
    position: relative;
    user-select: none;
  }
  .sorted {
    background: #a7f3d0;
    border-color: #059669;
    color: #064e3b;
  }
  .comparing {
    background: #fde68a;
    border-color: #ca8a04;
    color: #78350f;
    animation: pulse 1.5s infinite;
  }
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }
  .arrow {
    position: absolute;
    top: -30px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 24px;
    color: #8b7ab8;
    animation: bounce 1.5s infinite;
  }
  @keyframes bounce {
    0%, 100% { transform: translateX(-50%) translateY(0); }
    50% { transform: translateX(-50%) translateY(-8px); }
  }
  #explanation {
    background: #f0f9ff;
    border-radius: 15px;
    padding: 15px;
    text-align: center;
    font-size: 1.1rem;
    color: #475569;
    min-height: 70px;
  }
  .stats {
    display: flex;
    justify-content: space-around;
    margin-bottom: 20px;
    color: #6b7280;
    font-weight: 600;
  }
  .stats div {
    background: #fef3c7;
    padding: 10px 20px;
    border-radius: 15px;
    flex: 1;
    margin: 0 5px;
    text-align: center;
  }
  #finalScoreScreen {
    text-align: center;
  }
  #finalScoreScreen h2 {
    color: #10b981;
  }
  #finalScoreScreen p {
    font-size: 1.3rem;
    margin-top: 15px;
  }
</style>
</head>
<body>

<div class="container" id="menuScreen">
  <h2>üå∏ Insertion Sort üå∏</h2>
  <button id="btnRules" type="button">üìö ‡∏≠‡πà‡∏≤‡∏ô‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</button>
  <button id="btnStart" type="button">üéÆ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
</div>

<div class="container" id="rulesScreen" style="display:none;">
  <h2>üìñ ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>
  <ul>
    <li>‡πÄ‡∏Å‡∏°‡∏°‡∏µ 3 ‡∏î‡πà‡∏≤‡∏ô ‡∏¢‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢ ‡πÜ</li>
    <li>‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏î‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</li>
    <li>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 5-7 ‡∏ï‡∏±‡∏ß</li>
    <li>‡∏Å‡∏î "‡∏™‡∏•‡∏±‡∏ö" ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡∏™‡∏≠‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</li>
    <li>‡∏Å‡∏î "‡πÑ‡∏°‡πà‡∏™‡∏•‡∏±‡∏ö" ‡∏´‡∏≤‡∏Å‡πÄ‡∏•‡∏Ç‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</li>
    <li>‡∏Å‡∏î "‡πÅ‡∏ó‡∏£‡∏Å" ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏•‡∏Ç‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</li>
  </ul>
  <button id="btnBackToMenu" type="button">üîô ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
  <button id="btnPlayNow" type="button">üéÆ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏•‡∏¢</button>
</div>

<div class="container" id="gameScreen" style="display:none;">
  <h3 id="playerInfo"></h3>
  <div class="stats">
    <div>‡∏î‡πà‡∏≤‡∏ô <br /><span id="currentLevel">1</span>/3</div>
  </div>

  <div class="number-box" id="numberBox"></div>
  <div id="explanation">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</div>

  <div>
    <button id="btnSwap" type="button">üîÑ ‡∏™‡∏•‡∏±‡∏ö</button>
    <button id="btnNoSwap" type="button">‚úÖ ‡πÑ‡∏°‡πà‡∏™‡∏•‡∏±‡∏ö</button>
    <button id="btnInsert" type="button" disabled>üìç ‡πÅ‡∏ó‡∏£‡∏Å</button>
    <button id="btnShuffle" type="button">üé≤ ‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
  </div>
  <button id="btnBackMenu" type="button" style="margin-top:15px;">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
</div>

<div class="container" id="finalScoreScreen" style="display:none;">
  <h2>üéâ ‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡πâ‡∏ß! üéâ</h2>
  <p id="finalMessage"></p>
  <button id="btnRestart" type="button">‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
  <button id="btnBackMenu2" type="button">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
</div>

<script>
  let numbers = [];
  let currentIndex = 1;
  let currentInner = 1;
  let inserted = false;
  let totalMoves = 0;
  let currentLevel = 1;

  const menuScreen = document.getElementById('menuScreen');
  const rulesScreen = document.getElementById('rulesScreen');
  const gameScreen = document.getElementById('gameScreen');
  const finalScoreScreen = document.getElementById('finalScoreScreen');

  function showMenu() {
    menuScreen.style.display = 'block';
    rulesScreen.style.display = 'none';
    gameScreen.style.display = 'none';
    finalScoreScreen.style.display = 'none';
  }
  function showRules() {
    menuScreen.style.display = 'none';
    rulesScreen.style.display = 'block';
    gameScreen.style.display = 'none';
    finalScoreScreen.style.display = 'none';
  }
  function showGame() {
    menuScreen.style.display = 'none';
    rulesScreen.style.display = 'none';
    gameScreen.style.display = 'block';
    finalScoreScreen.style.display = 'none';
  }
  function showFinalScore() {
    menuScreen.style.display = 'none';
    rulesScreen.style.display = 'none';
    gameScreen.style.display = 'none';
    finalScoreScreen.style.display = 'block';
  }

  document.getElementById('btnRules').onclick = showRules;
  document.getElementById('btnBackToMenu').onclick = showMenu;
  document.getElementById('btnPlayNow').onclick = () => {
    startGame();
    showGame();
  };
  document.getElementById('btnStart').onclick = () => {
    startGame();
    showGame();
  };
  document.getElementById('btnBackMenu').onclick = () => {
    if(confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å?')) {
      showMenu();
    }
  };
  document.getElementById('btnBackMenu2').onclick = () => {
    showMenu();
  };
  document.getElementById('btnRestart').onclick = () => {
    currentLevel = 1;
    startGame();
    showGame();
  };

  function generateUniqueNumbers(count) {
    const arr = [];
    const maxNum = currentLevel === 1 ? 50 : currentLevel === 2 ? 75 : 99;
    while(arr.length < count) {
      let r = Math.floor(Math.random() * maxNum) + 1;
      if(!arr.includes(r)) arr.push(r);
    }
    return arr;
  }

  function startGame() {
    totalMoves = 0;
    currentIndex = 1;
    currentInner = 1;
    inserted = false;
    const count = currentLevel === 1 ? 5 : currentLevel === 2 ? 6 : 7;
    numbers = generateUniqueNumbers(count);
    updateUI();
  }

  function handleSwap() {
    if(currentInner > 0 && numbers[currentInner] < numbers[currentInner - 1]) {
      [numbers[currentInner], numbers[currentInner - 1]] = [numbers[currentInner - 1], numbers[currentInner]];
      currentInner--;
      inserted = false;
      totalMoves++;
      updateUI();
    } else {
      alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç üòÖ');
      updateUI();
    }
  }

  function handleNoSwap() {
    if(currentInner === 0 || numbers[currentInner] >= numbers[currentInner - 1]) {
      inserted = true;
      totalMoves++;
      updateUI();
    } else {
      alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏•‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞! ü§î');
      updateUI();
    }
  }

  function handleInsert() {
    if(currentInner > 0 && numbers[currentInner] < numbers[currentInner - 1]) {
      alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ñ‡∏π‡∏Å ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡πÑ‡∏°‡πà‡∏™‡∏•‡∏±‡∏ö" ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞! üìç');
      return;
    }
    currentIndex++;
    if(currentIndex >= numbers.length) {
      completeLevel();
      return;
    }
    currentInner = currentIndex;
    inserted = false;
    updateUI();
  }

  function completeLevel() {
    if(currentLevel < 3) {
      alert(`üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà ${currentLevel}`);
      currentLevel++;
      startGame();
    } else {
      showFinalScore();
      document.getElementById('finalMessage').textContent = `‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á 3 ‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! üåü‚ú®`;
    }
  }

  function updateUI() {
    const box = document.getElementById('numberBox');
    box.innerHTML = '';
    for(let i=0; i<numbers.length; i++) {
      const div = document.createElement('div');
      div.textContent = numbers[i];
      div.className = 'number';
      if(i < currentIndex) div.classList.add('sorted');
      if(i === currentInner && !inserted) div.classList.add('comparing');
      if(i === currentInner && inserted) div.classList.add('sorted');

      if(i === currentInner && !inserted) {
        const arrow = document.createElement('div');
        arrow.className = 'arrow';
        arrow.textContent = '‚¨áÔ∏è';
        div.appendChild(arrow);
      }
      box.appendChild(div);
    }
    const explanation = document.getElementById('explanation');
    if(currentIndex >= numbers.length) {
      explanation.textContent = `üéâ ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà ${totalMoves} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á`;
    } else if(!inserted) {
      if(currentInner > 0) {
        explanation.textContent = `üîç ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏•‡∏Ç ${numbers[currentInner]} ‡∏Å‡∏±‡∏ö ${numbers[currentInner - 1]}`;
      } else {
        explanation.textContent = `üìç ‡πÄ‡∏•‡∏Ç ${numbers[currentInner]} ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏£‡∏Å‡πÅ‡∏•‡πâ‡∏ß`;
      }
    } else {
      explanation.textContent = `‚úÖ ‡πÄ‡∏•‡∏Ç ${numbers[currentInner]} ‡∏ñ‡∏π‡∏Å‡πÅ‡∏ó‡∏£‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! ‡πÑ‡∏õ‡πÄ‡∏•‡∏Ç‡∏ï‡∏±‡∏ß‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`;
    }

    document.getElementById('currentLevel').textContent = currentLevel;

    document.getElementById('btnInsert').disabled = !inserted;
    document.getElementById('btnSwap').disabled = inserted;
    document.getElementById('btnNoSwap').disabled = inserted;
  }

  document.getElementById('btnSwap').onclick = handleSwap;
  document.getElementById('btnNoSwap').onclick = handleNoSwap;
  document.getElementById('btnInsert').onclick = handleInsert;
  document.getElementById('btnShuffle').onclick = () => {
    if(confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?')) startGame();
  };

  showMenu();
</script>

</body>
</html>
